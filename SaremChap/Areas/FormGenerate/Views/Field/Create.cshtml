@model Domainclasses.Modes.Field
<link href="~/Content/plugins/jQuery-Tags-Input-master/jquery.tagsinput.css" rel="stylesheet" />
<script src="~/Content/plugins/jQuery-Tags-Input-master/jquery.tagsinput.js"></script>
<div class="call-action call-action-boxed call-action-style2 clearfix text-right">

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            @Html.ValidationSummary(true)

            <div class="form-group" style="text-align: right">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">
                                @Html.DropDownList("FormId", String.Empty)
                                @Html.ValidationMessageFor(model => model.FormId)
                            </div>
                            <div class="col-md-4">
                                <span>  فرم مربوطه  </span>
                            </div>

                        </div>

                    </div>

                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">
                                @Html.EnumDropDownListFor(model => model.FieldType, new { @class = " form-control", id = "fieldtype" })
                                @Html.ValidationMessageFor(model => model.FieldType)
                            </div>
                            <div class="col-md-4">
                                <span>  نوع فیلد  </span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="form-group" style="text-align: right">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">
                                @Html.TextBoxFor(model => model.TitleEn, new { @class = " form-control" })
                                @Html.ValidationMessageFor(model => model.TitleEn)
                            </div>
                            <div class="col-md-4">
                                <span>  عنوان انگلیسی  </span>
                            </div>

                        </div>

                    </div>

                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">
                                @Html.TextBoxFor(model => model.TitleFa, new { @class = " form-control" })
                                @Html.ValidationMessageFor(model => model.TitleFa)
                            </div>
                            <div class="col-md-4">
                                <span>  عنوان فارسی  </span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="form-group" style="text-align: right">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row" id="finance" style="display: none">
                            <div class="col-md-8">
                                @Html.TextBoxFor(model => model.Finance, new { @class = " form-control", id = "finance" })
                                @Html.ValidationMessageFor(model => model.Finance)
                            </div>
                            <div class="col-md-4">
                                <span>  بار مالی  </span>
                            </div>

                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-4">
                                @Html.EditorFor(model => model.EffectivePrice)
                                @Html.ValidationMessageFor(model => model.EffectivePrice)
                                <span>موثر در قیمت</span>
                            </div>
                            <div class="col-md-4">
                                @Html.EditorFor(model => model.RequiredField)
                                @Html.ValidationMessageFor(model => model.RequiredField)
                                <span>فیلد اجباری</span>
                            </div>
                            <div class="col-md-4">
                                @Html.EditorFor(model => model.DisabledField)
                                @Html.ValidationMessageFor(model => model.DisabledField)
                                <span>فیلد غیر فعال</span>
                            </div>

                        </div>

                    </div>


                </div>
            </div>



            <hr />
            <div class="form-group" style="text-align: right">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row" id="optionField" style="display: none">
                            <div class="col-md-8 input-group">

                                <div class="dynamic-form">
                                    <a id="add" href="#">اضافه</a>
                                    |
                                    <a id="remove" href="#">حذف</a>
                                    |
                                    @*<a id="reset" href="#">Reset</a>*@
                                 
                                        <div class="inputs">
                                            <div class="row">
                                                <div class="col-md-6" id="valueContainer">
                                                    <input id="fieldValue0" class="form-control text-right" placeholder="مقدار" type="number" value="" name="dynamic[]">
                                                </div>
                                                <div class="col-md-6" id="nameContainer">
                                                    <input id="fieldName0" class="form-control text-right" placeholder="نام" type="text" value="" name="dynamic[]">
                                                </div>
                                            </div>
                                        </div>
                                        <input class="submit" type="button" value="Submit" name="submit">
                                   
                                </div>

                                <input name="Options" id="Options" type="hidden" />
                                @*@Html.TextBoxFor(model => model.Options, new {@class = " form-control tags", id = "tags_1"})
                                    @Html.ValidationMessageFor(model => model.Options)*@


                            </div>
                            <div class="col-md-4">
                                <span>  Options  </span>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-6">
                    </div>


                </div>
            </div>
            <div class="form-group" style="text-align: right">
                <div class="col-md-12">
                    <input type="submit" value="ایجاد فیلد" class="submitclick" />
                </div>
            </div>
        </div>
    }

</div>

<script type="text/javascript">
    $(document).ready(function () {

        var i = 1;

        $('#add').click(function () {
            $('<input id="fieldValue' + i + '" class="form-control text-right fieldValue" placeholder="مقدار" type="number" value="" name="dynamic[]">').fadeIn('slow').appendTo('.inputs .row #valueContainer');
            $('<input id="fieldName' + i + '" class="form-control text-right fieldName" placeholder="نام" type="text" value="" name="dynamic[]">').fadeIn('slow').appendTo('.inputs .row #nameContainer');

            i++;
        });

        $('#remove').click(function () {
            if (i > 1) {
                $('.inputs .row #nameContainer .fieldName:last').remove();
                $('.inputs .row #valueContainer .fieldValue:last').remove();
                i--;
            }
        });

        //$('#reset').click(function () {
        //    while (i > 2) {
        //        $('.field:last').remove();
        //        i--;
        //    }
        //});

        // here's our click function for when the forms submitted

        $('.submit').click(function () {

            var item = [];
            var data = {
                items: [
{ id: "", name: "", type: "" }
                ]
            };
            for (j = 0; j < i; j++) {
                var id = j;
                var name = $("#fieldName" + j).val();
                var type = $("#fieldValue" + j).val();
                // Create the item using the values
                var item = { id: id, name: name, type: type };
                // Add the item to the array
                data.items.push(item);
            }

            data.items.shift();
            console.log(data);
            document.getElementById("Options").value = JSON.stringify(data);

            //alert(options);
            return false;
        });

    });
</script>




<script>

    $('#EffectivePrice').change(
        function () {
            if ($("#EffectivePrice").is(':checked')) {
                $('#finance').show();

            } else {
                $('#finance').hide();
            }
        });

    $('#fieldtype').change(
        function () {

            if ($(this).val() == 1) {
                $('#optionField').show();
            }
            else if ($(this).val() == 7) {
                $('#optionField').show();
            } else {
                $('#optionField').hide();
            }
        });

    $('#tags_1').tagsInput({ width: 'auto' });
</script>
